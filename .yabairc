#!/usr/bin/env sh

# --- Scripting Addition ---
# For this to work, you must configure sudo to
# be able to execute the command without a password
# See this wiki page for more information:
# https://github.com/koekeishiya/yabai/wiki/Installing-yabai-(latest-release)#configure-scripting-addition
#
# Enabling scripting addition for advanced features:
# yabai -m signal --add event=dock_did_restart action="sudo yabai --load-sa"
# sudo yabai --load-sa
#

# --- Global Settings ---
yabai -m config mouse_follows_focus om        # The mouse pointer does not follow the focused window
yabai -m config focus_follows_mouse off       # The focused window does not follow the mouse pointer
yabai -m config window_origin_display default # The original window is displayed by default
yabai -m config window_placement second_child # Placement of new windows as the second child in the layout
yabai -m config window_zoom_persist on        # Persist the zoom state of windows
yabai -m config window_topmost off            # Disable bringing windows to the foreground

# --- Window Appearance ---
yabai -m config window_shadow on                # Enable window shadows
yabai -m config window_animation_duration 0.0   # Window animation duration (disabled)
yabai -m config window_animation_frame_rate 120 # Window animation frame rate
yabai -m config window_opacity_duration 0.0     # Window variable opacity duration (disabled)
yabai -m config active_window_opacity 1.0       # Active window opacity
yabai -m config normal_window_opacity 0.70      # Normal (non-active) window opacity
yabai -m config window_opacity on               # Enable variable opacity function

# --- Window Borders ---
yabai -m config insert_feedback_color 0xffd75f5f      # Feedback color during insertion
yabai -m config active_window_border_color 0xffFFC1E1 # Active window border color
yabai -m config normal_window_border_color 0xffA8D5E2 # Normal window border color
yabai -m config window_border_width 4                 # Window border width
yabai -m config window_border_radius 12               # Window border radius (for rounded corners)
yabai -m config window_border_blur on                 # Enable blur effect on window borders
yabai -m config window_border_hidpi on                # Enable HiDPI support for window borders
yabai -m config window_border off                     # Disable window borders (enable if necessary)

# --- Layout Configuration ---
yabai -m config split_ratio 0.50 # Default split ratio for the layout
yabai -m config split_type auto  # Automatic split type
yabai -m config auto_balance off # Disable automatic workspace balancing
yabai -m config top_padding 8    # Top margin around windows
yabai -m config bottom_padding 8 # Bottom margin around windows
yabai -m config left_padding 8   # Left margin around windows
yabai -m config right_padding 8  # Right margin around windows
yabai -m config window_gap 8     # Gap between windows
yabai -m config layout bsp       # Use the default BSP (Binary Space Partitioning) layout

# --- Mouse Configuration ---
yabai -m config mouse_modifier fn      # Modifier for mouse actions (fn key)
yabai -m config mouse_action1 move     # Mouse action 1: move window
yabai -m config mouse_action2 resize   # Mouse action 2: resize window
yabai -m config mouse_drop_action swap # Mouse drop action: swap windows

# --- Application Exclusion Rules ---
yabai -m rule --add app="^Finder$" manage=off
yabai -m rule --add app="^Preview$" manage=off
yabai -m rule --add app="^Calculator$" manage=off
yabai -m rule --add app="^System Preferences$" manage=off
yabai -m rule --add app="^Ankama Launcher$" manage=off
yabai -m rule --add app="^Music$" manage=off

# --- Application Assignment Rules to Spaces ---
# --- Space 3 ---
yabai -m rule --add app="^Discord$" space=3
yabai -m rule --add app="^Slack$" space=3
yabai -m rule --add app="^Notion$" space=3
# --- Space 4 ---
yabai -m rule --add app="^Ankama Launcher$" space=4
yabai -m rule --add app="^Dofus$" space=4

# --- Space Configuration ---
# --- Space 3 --- (DONT WORK)
# yabai -m window --filter app="^Notion$" --grid 2:1:1:0:1:2 # Notion occupies 50% of the screen on the right
# --- Space 4 --- (DONT WORK)
# yabai -m window --filter app="^Dofus$" --grid 3:3:2:0:2:3 # Dofus occupies 70% of the screen on the right

# End message to indicate that the configuration has been loaded
echo "yabai configuration loaded.."
